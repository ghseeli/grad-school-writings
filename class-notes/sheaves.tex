\documentclass[11pt,leqno,oneside]{amsbook}
\usepackage{tikz}
\usetikzlibrary{cd}
\usepackage{bbm}
\usepackage{ytableau}
\usepackage{todonotes}

\usepackage{./notes}
\usepackage{../ReAdTeX/readtex-core}
\usepackage{../ReAdTeX/readtex-dangerous}
\usepackage{../ReAdTeX/readtex-abstract-algebra}

\newcommand{\bbk}{\mathbbm{k}}
\newcommand{\Class}{\operatorname{Class}}
\newcommand{\Res}{\operatorname{Res}}
\newcommand{\Ind}{\operatorname{Ind}}
\newcommand{\bs}{\textbackslash}
\renewcommand{\F}{F} % Sheaves
\newcommand{\G}{G}
\renewcommand{\H}{H}
\newcommand{\K}{K}
\newcommand{\cF}{\mathcal{F}}
\newcommand{\m}{\mathfrak{m}}
\newcommand{\Dom}{\operatorname{Dom}}
\renewcommand{\O}{\mathcal{O}}
\newcommand{\cA}{\mathcal{A}}
\newcommand{\cB}{\mathcal{B}}
\newcommand{\adjoint}{\dashv}
\DeclareMathOperator{\Supp}{Supp} % Support

\numberwithin{thm}{section}

\title[Theory of Sheaves]{Theory of Sheaves \\ Notes
  inspired by a class taught by Andrei Rapinchuk in Fall 2018}
\author{George H. Seelinger}
\date{Fall 2018}
\begin{document}
\maketitle
\section{Presheaves and Sheaves}
\subsection{Presheaves}
\begin{defn}
  Let \(X\) be topological space. A \de{presheaf of sets} \(\F\) on
  \(X\) is given by the following data.
  \begin{enumerate}
  \item For each open set \(U \subset X\), \(\F(U)\) is a set.
  \item If \(V \subset U\), there exists a map \(\rho^U_V \from \F(U)
    \to \F(V)\) such that
    \begin{enumerate}
    \item \(\rho_U^U = id_{\F(U)}\)
    \item If \(W \subset V \subset U\), then \(\rho_W^U = \rho_W^V
      \circ \rho_V^U\). In other words, \[
        \begin{tikzcd}
          \F(U) \ar[rd, "\rho_V^U"] \ar[rr, "\rho_W^U"] & & \F(W)\\
          & \F(V) \ar[ur, "\rho_W^V"]&
        \end{tikzcd}
      \]
    \end{enumerate}
  \end{enumerate}
\end{defn}
\begin{rmk}
  \begin{enumerate}
  \item Sometimes \(\F(\emptyset) = \{e\}\), the singleton set, is
    included in the 
    definition, but it is also a formal consequence of the above
    statements.
  \item A presheaf of sets can also be defined as a contravariant
    functor from \(\catname{Top}(X) \to \catname{Set}\) where
    \(\catname{Top}(X)\) is the category with objects being the open
    sets of \(X\) and the morphisms being \[
      \Hom(V,U) =
      \begin{cases}
        \{\iota \from V \into U\} & V \subset U\\
        \emptyset & V \not\subset U
      \end{cases}
    \]
  \end{enumerate}
\end{rmk}
Informally, we can think of presheaves as a collection of
functions. Historically, sheaves were thought in the context of some
``\'{e}tale space'', \(\cF\), mapping to \(X\) and then considering
the set of sections over \(U \subset X\). \[ 
  \begin{tikzcd}
    \cF \ar[r] & X\\
    & \ar[ul, "\sigma \in \F(U)"] U
  \end{tikzcd}
\]
This leads to the terminology of a ``sheaf of sections.'' Thus, we
often call elements of \(\F(u)\) ``sections of \(\F\) over \(U \subset
X\).'' Similarly, one can think of \(\rho_V^U\) as a restriction map.
\begin{example}
  Throughout, let \(X\) be a topological space.
  \begin{enumerate}
  \item Fix another topological space \(Y\). Then, for \(U \subset
    X\), let \[
      F(U) = \{\phi \from U \to Y \st \phi \text{ is continuous} \}
      \text{ and } F(\emptyset) = \{e\} 
    \]
    Then, for \(V \subset U\), we define \(\rho_V^U \from F(U) \to
    F(V)\) via \[
      (\phi \from U \to Y) \mapsto (\phi |_V \from V \to Y)
    \]
    In fact, if we take \(Y=\R\) or \(\C\), then we would get a
    presheaf of groups or even rings.
  \item If we take a set \(S\) and set \[
      F(U) = \{\text{Constant functions }\phi \from U \to S\}
    \]
    we get the \de{constant presheaf}. We can modify this slightly by
    instead letting \(F(U)\) be all locally constant functions from
    \(U\).
  \item Given \(Y\) as another topological space, recall that, given a
    map \(\pi \from Y \to X\), a section \(\sigma \from X \to Y\) is a
    continuous map such that \(\sigma \circ \pi = id_X\). Then, we can
    define the \de{presheaf of sections} by defining, for
    \(U \subset X\), \[
      F(U) = \{\phi \from U \to Y \text{ continuous} \st \pi \circ
      \phi = id_U\}
    \]
  \item Given any presheaf \(F\) on \(X\), we can restrict it to an
    open subset \(W \subset X\) by taking only the \(F(U)\) where \(U
    \subset W\).
  \item Fix a point \(p \in X\) and a set \(S\). Then, we can define
    the \de{skyscraper presheaf} by saying, for open \(U \subset
    X\), \[
      F(U) =
      \begin{cases}
        S & \text{if }p \in U\\
        \{e\} & \text{if }p \not\in U
      \end{cases}
    \]
    Then, if \(p \in V \subset U\), \(\rho^U_V = id_S\) and if \(p
    \not \in V\), then there is a unique map \(\rho^U_V \from F(U) \to
    \{e\}\).
  \end{enumerate}
\end{example}
Let \(K\) be an algebriacally closed field (eg \(K=\C\)).
\begin{defn}
  Given an ideal \(I \ideal K[x_1, \ldots, x_n]\), define the
  \de{vanishing set} \[
    V(I) := \{(a_1, \ldots, a_n) \in K^n \st f(a_1, \ldots, a_n) = 0
    \forall f \in I\}
  \]
  We call a set \(S \subset K^n\) for which there exists an ideal \(I
  \ideal K[x_1, \ldots, x_n]\) such that \(S = V(I)\) an \de{algebraic
  set}.
\end{defn}
Then, there is a topology called the \de{Zariski topology} on \(K^n\)
for which sets of the form 
\(V(I)\) form the family of all closed sets.
\begin{defn}
  If \(X = V(I)\) is an algebraic set, a function \(f \from X \to K\)
  is \de{regular} if there exists a polynomial \(p(x_1, \ldots, x_n)
  \in K[x_1, \ldots, x_n]\) such that \(f(x) = p(x)\) for all \(x \in
  X\). (In other words, there is a polynomial \(p\) such that \(p|_X =
  f\).)
\end{defn}
All such functions form a ring, called the \de{coordinate ring},
denoted \(K[X]\). There is a natural map
\begin{align*}
  K[x_1, \ldots, x_n] & \onto K[X] \\
  p & \mapsto p|_X
\end{align*}
which gives us
\begin{prop}
  The coordinate ring \(K[X] \isom K[x_1, \ldots, x_n]/I(X)\) where
  \(I(X) = \{p \st p|_X = 0\}\).
\end{prop}
Recall, however, that \(X = V(I)\) for some \(I \ideal K[x_1, \ldots,
x_n]\). One can check that \(I \subset I(X) = I(V(I))\), but this
containement is not necessarily an equality due to the following example.
\begin{example}
  Let \(I = (x_1^2)\). Then, \(X = V(I) = \{(a_1, \ldots, a_n) \in K^n \st
  a_1 = 0\}\). From this, we see that any \(p \in x_1 K[x_1, \ldots,
  x_n]\) has the property that \(p|_X = 0\). Thus, \(I(X) = (x_1)\).
\end{example}
One may then ask how \(I(X)\) is related to \(X\). The answer is given
by the following famous theorem.
\begin{thm}[Hilbert's Nullstellensatz]
  Let \(K\) be an algebraically closed field. Then, for \(J \ideal
  K[x_1, \ldots, x_n]\), we have that \[
    I(V(J)) = r(J)
  \]
  where \(r(J) = \{s \in K[x_1, \ldots, x_n] \st s^m
  \in J \text{ for some }m \in \N\}\) is the ``radical'' of \(J\).
\end{thm}
There are other equivalent formulations of Hilbert's Nullstellensatz,
such as \todo{Check that this is actually equivalent.}
\begin{prop}
 Given proper ideal \(I \propsubset K[x_1, \ldots, x_n]\), we have
 that \(V(I) \neq 
 \emptyset\). 
\end{prop}
Furthermore, \(K[X]\) allows us to recover \(X\) in a functorial way,
since we have
\begin{cor}
  For \(K\) an algebraically closed field, we have that
  \begin{enumerate}
  \item all maximal ideals \(\m \ideal K[x_1, \ldots, x_n]\) are of
    the form \(\m = (x_1-a_1, \ldots, x_n - a_n)\) and
  \item \(V(\m) = \{(a_1, \ldots, a_n)\}\).
  \end{enumerate}
\end{cor}
Thus, we can recover all the points of \(X\) by applying \(V(\cdot)\)
to the maximal ideals of \(X\).
\begin{defn}
  A topological space \(X\) is called \de{irreducible} if \(X \neq X_1
  \union X_2\) for \(X_1,X_2\) proper closed sets of \(X\).
\end{defn}
\begin{rmk}
  Note that this notion is relatively uninteresting for \(T_2\)
  topological spaces since any non-trivial \(T_2\) space is
  reducible. As such, this notion is rarely used outside algebraic
  geometry. 
\end{rmk}
\begin{prop}
  A space \(X \subset K^n\) is irreducible if and only if \(I(X)\) is
  a prime 
  ideal if and only if \(K[X]\) is an integral domain.
\end{prop}
Using Hilbert's Basis Theorem, we also get 
\begin{prop}
  Every algebraic set is a finite union of irreducible algebraic sets.
\end{prop}
\begin{prop}
  If \(f \in K[x_1, \ldots, x_n]\) is irreducible, then \(X = V((f))\)
  is irreducible.
\end{prop}
\begin{proof}
  By Hilbert's Nullstellensatz, we have that \[
    I(V((f))) = r((f))
  \]
  and so, \(g \in r((f)) \implies f \divides g^m\) and because \(f\)
  is irreducible, this gives that \(f \divides g \implies g \in
  (f)\). Thus, it must be that \((f)\) is a prime ideal and so
  \(V((f))\) is irreducible.
\end{proof}
\begin{defn}
  If \(X \subset K^n\) is irreducible, then \(K[X]\) is an integral
  domains and so we define \(K(X)\) to be the fraction field of
  \(K[X]\), also referred to as the \de{field of rational functions}.
\end{defn}
While it is nice that we have this definition, we have a fundamental
problem because \(f \in K(X)\) does not have a \emph{canonical}
presentation as \(f = \frac{g}{h}\), and so we can run into problems
if one choice of \(h\) is zero at a point \(x\). Thus, we must do a
little work to 
address this problem.
\begin{defn}
  Given \(f \in K(X)\) and \(x \in X\), we say \(f\) is \de{defined at
  \(x\)} if there is \(g_x, h_x \in K[X]\) such that \(f =
  \frac{g_x}{h_x}\) and \(h_x \neq 0\). Furthermore, we define \[
    \Dom(f) := \{x \in X \text{ where }f\text{ is defined}\}
  \]
\end{defn}
However, it is not clear that \(f\) is well-defined on the
domain. Indeed, we check
\begin{proof}
  Let \(f = \frac{g_1}{h_1} = \frac{g_2}{h_2}\) such that \(h_1(x),
  h_2(x) \neq 0\). Then, this gives\[
    g_1 h_2 = g_2 h_1 \implies g_1(x) h_2(x) = g_2(x) h_1(x) \implies
    \frac{g_1(x)}{h_1(x)} = \frac{g_2(x)}{h_2(x)}
  \]
\end{proof}
\begin{prop}
  The domain of a rational function \(f\) is a non-empty Zariski open set.
\end{prop}
This follows immediately by considering that a Zariski closed set is
of the form \(V(I)\) and so an open set is of the form \(K^n \setminus
V(I) = \Union_{p \in I} D(p)\) where
\begin{defn}
  \[
    D(p) := \{x \in K^n \st p(x) \neq 0\}
  \]
  is called the \de{principal (distinguished) open set defined by \(p\)}.
\end{defn}
\begin{prop}
  \begin{enumerate}
  \item \(D(p_1) \union D(p_2) = D(p_1 p_2)\)
  \item The \(D(p)\)'s form a base for the Zariski topology.
  \end{enumerate}
\end{prop}
\begin{defn}
  Given that the map \(K[x_1, \ldots, x_n] \to K[X]\) sends \(p
  \mapsto q\), we define \[
    D_X(q) := \{x \in X \st q(x) \neq 0\} = X \intersect D(p)
  \]
\end{defn}
Thus, we have that \[
  \Dom(f) = \Union_{f=\frac{g}{h}} D_X(h)
\]
\begin{defn}
  Given a space \(X \subset K^n\), we define the \de{structure
    presheaf}, by, for every open set \(U \subset X\), \[
    \O_X(U) = \{f \in K(X) \st f \text{ is defined at every point of }U\}
  \]
  and, for \(V \subset U\), \[
    \rho^U_V \from \O_X(U) \into \O_X(V) \text{ is the identity embedding}
  \]
\end{defn}
\begin{prop}
  \(\O_X(U)\) is a \(K\)-subalgebra of \(K(X)\).
\end{prop}
One may ask, what is \(\O_X(X)\). To answer this, we first define a
general notion.
\begin{defn}
  Given a presheaf \(\F\) on \(X\), \(\F(X)\) is called the \de{global
  sections}, and sometimes is denoted \(\Gamma(\F)\).
\end{defn}
Thus, the global sections \(\O_X(X)\) are the rational functions
defined everywhere on \(X\). From this, we can immediately conclude
that \(K[X] \subset \O_X(X)\), but in fact, we have
\begin{prop}
  \[
    \O_X(X) = K[X]
  \]
\end{prop}
\begin{proof}
  Given \(f \in \O_X(X)\), there is a presentation of \(f\) forever
  \(x \in X\) as \(f = \frac{g_x}{h_x}\) such that \(h_x(x) \neq
  0\). Now, let \[
    J = (h_x \st x \in X) \ideal K[X]
  \]
  Then, \(J\) has no zeros in \(X\) and so, by Hilbert's
  Nullstellensatz, \(J = K[X]\). Thus, there exists \(\phi_i \in
  K[X]\) such that \[
    \phi_1 h_{x_1} + \cdots + \phi_r h_{x_r} = 1
  \]
  Thus, \[
    f = f \cdot 1 = f(\phi_1 h_{x_1} + \cdots + \phi_r h_{x_r}) =
    \phi_1 g_{x_1} + \cdots + \phi_r g_{x_r}
  \]
  which is a polynomial.
\end{proof}
Thus, with this idea, we can generalize our definition of a regular
function.
\begin{defn}
  The regular functions on an open set \(U \subset X\) are given by
  \(\O_X(U)\). 
\end{defn}
\begin{rmk}
  A generalization of this idea is the notion of the prime spectrum of
  an arbitrary commutative ring \(A\), which allows us to put a
  Zariski topology and a presheaf on this space.  This will be
  expanded on later.
\end{rmk}
\begin{defn}
  Given a fixed arbitrary topological space \(X\), and 2 presheaves
  \(\F\) and \(\G\) on \(X\), then a morphism between them, denoted
  \(\phi \from F \to G\) consists of appropriate morphisms \(\phi_U\)
  for all open \(U \subset X\) and \(V \subset U\) such that the
  following diagram 
  commutes \[
    \begin{tikzcd}
      \F(U) \ar[d,"\rho^U_V(\F)"] \ar[r,"\phi_V"] & \G(U)
      \ar[d,"\rho^U_V(\G)"] \\
      \F(V) \ar[r, "\phi_V"] & \G(V)
    \end{tikzcd}
  \]
\end{defn}
\begin{rmk}
  If we think of a presheaf as a contravariant functor, then a
  morphism of presheaves is a natural transformation.
\end{rmk}
Now, suppose \(F,G\) are presheaves of some category with kernels,
such as abelian groups. Then, our morphism diagrams can be extended \[
    \begin{tikzcd}
      \ker \phi_U \ar[r] & \F(U) \ar[d,"\rho^U_V(\F)"] \ar[r,"\phi_V"]
      & \G(U) 
      \ar[d,"\rho^U_V(\G)"] \\
      \ker \phi_V \ar[r] & \F(V) \ar[r, "\phi_V"] & \G(V)
    \end{tikzcd}
  \]
Then, we have
\begin{prop}
  \(\rho^U_V(F)(\ker \phi_U) \subset \ker \phi_V\)
\end{prop}
which allows us to define \(K(U) = \ker \phi_U \subset \F(U)\), giving
us that \(\{K(U), \rho^U_V(\F)\}\) is a presheaf, and similarly for
\(I(U) = \im \phi_U \subset \G(U)\).
\begin{prop}
  \begin{enumerate}
  \item \(\catname{Presheaves}(X)\) forms a category.
  \item We can send a presheaf \(\F \to \F(X)\), the global sections
    of \(\F\) over \(X\), giving us a function. For example, if \(\F\)
    is presheaf of abelian groups, then we have a functor \[
      \catname{Presheaves}(X) \to \catname{AbGps}
    \]
    called the \de{functor of global sections}.
  \end{enumerate}
\end{prop}
Eventually, this will allow us to define the notion of a short exact
sequence for (pre)sheaves. However, the functor of global sections
turns out to be left exact but not right exact, so we will be able to
look at right derived functors to measure the failure of this
exactness.
\subsection{Sheaves}
We often want to glue together local information. For instance, if we
had 2 functions \(f_1 \from U_1 \to \R\) and \(f_2 \from U_2 \to \R\),
and wanted to build a function on \(U = U_1 \union U_2\), we would
need that \[
  f_1|_{U_1 \intersect U_2} = f_2|_{U_1 \intersect U_2}
\]
\begin{defn}
  Let \(X\) be a topological space. For all open sets \(U \subset X\),
  take an open cover (not necessarily finite)  \(U = \Union_{\alpha
    \in I} U_\alpha\). A presheaf \(\F\) on \(X\) is a \de{sheaf} if
  \begin{enumerate}[label=(S\arabic*)]
  \item\label{sheaf-1} For \(x,t \in \F(U)\) and \(\rho^U_{U_\alpha}(s) =
    \rho^U_{U_\alpha}(t)\), then \(s=t\) and
  \item\label{sheaf-2} Given \(s_\alpha \in \F(U_\alpha)\) for \(\alpha \in I\) such that
    \(\rho^{U_\alpha}_{U_\alpha \intersect U_\beta}(s_\alpha) =
    \rho^{U_\beta}_{U_\alpha \intersect U_\beta}(s_\beta) \), there
    exists an \(s \in \F(U)\) such that \(\rho^U_{U_\alpha}(s) =
    s_\alpha \) for all \(\alpha \in I\).
  \end{enumerate}
\end{defn}
\begin{rmk}
  A presheaf satisfying only condition (a) is called a \de{separated
    presheaf} of a \de{monopresheaf}.
\end{rmk}
Let us see how some of our presheaves meet this definition (and others
do not).
\begin{example}
  \begin{enumerate}[label=(\arabic*)]
  \item Fix another topologyical space \(Y\) and define \(\F(U) =
    \{\text{all continuous maps }f \from U \to Y\}\) and the
    restriction maps to be the usual restriction of functions. Then,
    if \(U = \Union_{\alpha \in I} U_\alpha\),
    \begin{enumerate}
    \item For \(f,g \from U \to Y\), we have \[
        \rho^U_{U_\alpha}(f) = \rho^U_{U_\alpha}(g) \iff f(x) = g(x)\ 
        \forall x \in U_\alpha \iff f(x) = g(x)\ \forall x \in U
      \]
    \item Given \(f_\alpha \in \F(U_\alpha)\), we get \[
        \rho^{U_\alpha}_{U_\alpha \intersect U_\beta}(f_\alpha) =
        \rho^{U_\beta}_{U_\alpha \intersect U_\beta}(f_\beta) \implies
        f_\alpha(x) = f_\beta(x) \ \forall x \in U_\alpha \intersect U_\beta
      \]
      Then, given \(x \in U\), we have that there is at least one
      \(\alpha \in I\) such that \(x \in U_\alpha\) and, by above, we
      can define \(f(x) = f_\alpha(x)\). This is continuous since, for
      open set \(V \subset Y\), we get \(f^{-1}(V) = \Union
      f_\alpha^{-1}(V)\), which is open. 
    \end{enumerate}
  \item Consider the presheaf of bounded functions on \(X=\R\), that
    is \(\F(U) = \{\text{bounded function }f \from U \to \R\}\). We
    may cover \(X = \R\) by overlapping intervals (eg \(U_n =
    (n-\frac{1}{2}, n+\frac{4}{3})\)). Then, on each \(U_n\), take
    \(f_n \in \F(U_n)\) to be \(f_n(x) = x\) for \(x \in U_n\). Each
    of these \(f_n\)'s is bounded on the domain, but if you glue them
    all together, you do not get a bounded function on \(\R\).
  \item More generally, consider the constant presheaf on \(X\) to set
    \(S\) with at least \(2\) elements where \(F(U) = S\) when \(U
    \neq \emptyset\) and 
    \(\F(\emptyset) = \{e\}\), the \(1\) element set. Then, take
    non-empty open sets \(U_1, U_2\) such that \(U_1 \intersect U_2 =
    \emptyset\). If we take \(2\) distinct elements of \(S\), say
    \(s_1,s_2\) and let \(U = U_1 \union U_2\), we find that we cannot
    satisfy the second sheaf condition as follows. If there
    is an \(s \in \F(U) = S\) such that the condition holds, it would
    get mapped to \(s_1\) under the restriction map to \(U_1\) and to
    \(s_2\) under the restriction map to \(U_2\). However, this cannot
    happen because the restriction maps in these instances are just
    the identity maps.
  \item The outlook for the locally constant presheaf is better, since
    we no longer run into these gluing problems.
  \item Consider the skyscaper presheaf. We verify
    \begin{enumerate}
    \item Let \(s,t \in \F(U)\). If \(p \not \in U\), then \(s=t\)
      since \(\F(U) = \{e\}\). If \(p \in U\), there exists an
      \(\alpha \in I\) with \(p \in U_\alpha\) and \(\rho^U_{U_\alpha}
      = id_S\). Thus, \[
        \rho^U_{U_\alpha}(s) = \rho^U_{U_\alpha}(t) \implies s=t
      \]
    \item Let \(s_\alpha \in \F(U_\alpha)\) such that
      \(\rho^{U_\alpha}_{U_\alpha \intersect U_\beta(s_\alpha) =
        \rho^{U_\beta}_{U_\alpha \intersect U_\beta}}(s_\beta)\). If
      \(p \not \in U\), then \(\F(U) = \{e\}\). If \(p \in U\), then
      \(p \in U_\alpha\) so \(s_\alpha = s \in F(U_\alpha)\). The rest
      follows from the definition of the restriction maps.
    \end{enumerate}
  \item Now, let us consider the structure presheaf \(\O_X\) for \(X
    \subset K^n\) and \(X\) irreducible. We will
    show it is a sheaf. Let open set \(U \subset X\) have open cover
    \(U = \Union_{\alpha \in I} U_\alpha\)
    \begin{enumerate}
    \item Take \(f,g \in \O_X(U)\). Then, we have that
      \(\rho^U_{U_\alpha}(f) = f \in K(X)\) and thus, if
      \(\rho^U_{U_\alpha}(f) = \rho^U_{U_\alpha}(g)\), we immediately
      get that \(f=g\) in \(K(X)\).
    \item Given \(f_\alpha \in \F(U_\alpha)\), we similarly get
      that \[
        \rho^{U_\alpha}_{U_\alpha \intersect U_\beta}(f_\alpha) =
        \rho^{U_\beta}_{U_\alpha \intersect U_\beta}(f_\beta) \implies
        f_\alpha = \rho^{U_\alpha}_{U_\alpha \intersect U_\beta}(f_\alpha) =
        \rho^{U_\beta}_{U_\alpha \intersect U_\beta}(f_\beta) = g_\beta
      \]
      and so, we may take \(f = f_\alpha\). 
    \end{enumerate}
  \end{enumerate}
\end{example}
\begin{prop}
  \(\O_X(D_X(p)) = S^{-1}K[X]\), the localization of \(K[X]\) with \(S
  = \{1,p,p^2, \ldots\}\).
\end{prop}
\begin{proof}
  The containment \(\O_X(D_X(p)) \supset S^{-1}K[X]\) is immediate
  since every element of \(S^{-1}K[X]\) is a rational function defined
  where \(p \neq 0\). Let \(f \in \O_X(D_X(p))\). For all \(x \in
  D_X(p)\), we have a presentation of \(f\) as \(f = \frac{g_x}{h_x}\)
  where \(h_x(x) \neq 0\). Now, let \[
    I = (h_x \st x \in D_X(p)) \ideal K[X]
  \]
  and consider that \(V(I) \intersect D_X(p) = \emptyset\). In fact,
  \(V(I) \subset X \setminus D_X(p) = V_X(p)\), that is, \(p\)
  vanishes at all points where \(I\) vanishes.

  By Hilbert's Nullstellensatz, some power of \(p\), say \(p^m\), is
  in \(I\). Thus,
  \begin{align*}
    & p^m = a_1 h_{x_1} + \cdots + a_r h_{x_r} & \text{ by Hilbert's
                                                 Basis Theorem} \\
    \implies & fp^m = a_1 g_{x_1} + \cdots + a_r g_{x_r} \in K[X] \\
    \implies & f = \frac{a_1 g_{x_1} + \cdots + a_r g_{x_r}}{p^m} \in S^{-1}K[X]
  \end{align*}
\end{proof}
\begin{example}
  Let \(X = \C^2\) and \(U = \C^2 \setminus \{(0,0)\}\). Then, we have
  \(I = (x,y)\) and, since \(\{(0,0)\} = \{x=0\} \intersect \{y=0\}\),
  we get \[
    U = D((x)) \union D((y)) \implies \O_X(U) = \O_X(U_1) \intersect \O_X(U_2)
  \]
  where \[
    \begin{cases}
      \O_X(U_1) = S_1^{-1}K[x,y] & S_1 = \{1,x,x^2,\ldots\} \\
      \O_X(U_2) = S_2^{-1}K[x,y] & S_2 = \{1,y,y^2,\ldots\}
    \end{cases}
  \]
  However, this forces \[
    O_X(U) = S_1^{-1}K[x,y] \intersect S_2^{-1}K[x,y] = K[x,y]
  \]
\end{example}
Now, we observe that \(\catname{Sh}(X)\) is a full subcategory of
\(\catname{PrSh}(X)\), so we have an embedding \(\catname{Sh}(X) \into
\catname{PrSh}(X)\). However, many things to construct new sheaves
from old ones, like cokernel and tensor, land in
\(\catname{PrSh}(X)\). So, we need a way to go back.
\begin{thm}
  For any presheaf \(\F\) on a topological space \(X\), there exists a
  sheaf \(\F^+\) on \(X\) together with a morphism \(\theta \from \F
  \to \F^+\) so that, for every sheaf \(\G\) on \(X\) and a morphism
  \(\phi \from \F \to G\), there exists a unique morphism \(\psi \from
  \F^+ \to G\) such that the following diagram commutes \[
    \begin{tikzcd}
      \F \ar[rd, "\theta"] \ar[rr,"\phi"] & & \G \\
      & \F^+ \ar[ru, dashed, "\psi"]
    \end{tikzcd}
  \]
  \(\F^+\) is called the sheaf associated with presheaf \(\F\).
\end{thm}
\begin{proof}
  Postponed for now.
\end{proof}
Using this universal property, we can take a map of presheaves and
lift it to a map of their associated sheaves \[
  \begin{tikzcd}
    \F \ar[d, "\theta"]\ar[r, "\phi"] \ar[rd, dashed, "\psi"] & \F_1 \ar[d, "\theta_1"]\\
    \F^+ \ar[r, dotted, "\phi^+"] & \F_1^+
  \end{tikzcd}
\]
This gives us
\begin{prop}
  \(\Hom_{\catname{Sh}}(\F^+,G) \isom
  \Hom_{\catname{PrSh}}(F,G)\). In fact, such an identification is natural.
\end{prop}
\begin{defn}
  Let \(\cA\) and \(\cB\) be categories and let \(S \from \cA \to
  \cB\)  and \(T \from \cB \to \cA\) be functors. We say \(S\) and
  \(T\) are \de{adjoint} if, for all \(A \in \cA\) and \(B \in \cB\),
  there is a natural bijection \[
    \Hom_{\cB}(SA,B) \isom \Hom_{\cA}(A,TB)
  \]
  denoted \(S \adjoint T\).
\end{defn}
So, in our setup with \[
  \catname{PrSh}(X) \to[S] \catname{Sh}(X), \ \catname{Sh}(X) \to[T] \catname{PrSh}(X)
\]
since \(TG = G\), we get that \(S\) and \(T\) are adjoint.
\section{Limits}
In class, there were several lectures on categorical colimits and
direct limits that are ommitted here 
since they are relatively straightforward
\section{Some Basic Theorems}
\begin{defn}
  Given a presheaf \(\F\) on a topological space \(X\), for \(x \in
  X\), define the \de{stalk at \(x\)} to be \[
    \F_x := \varinjlim_{U \ni x} \F(U)
  \]
  where \(U\) is a neighborhood of \(x\). Elements of the stalk are
  called \de{germs}. Finally, for all such \(U\), we define the map \[
    \rho_x^U \from \F(U) \to \F_x
  \]
  and, given a homomorphism of presheaves \(\phi \from \F \to \G\), we
  say \[
    \phi_x \from \F_x \to \G_x
  \]
  is the induced homomorphism.
\end{defn}
While it is easy to say \(\phi_x \from \F_x \to \G_x\) is the induced
homomorphism (and well-defined), it is worth thinking about how via
this commutative diagram exhibiting the universal property of \(\varinjlim
\F(U)\): \[
    \begin{tikzcd}
      \F(U) \ar[dd, "\rho^U_V"] \ar[rd, "\rho^U_x"] \ar[rr, "\phi_U"] & & \G(U)
      \ar[rd] \ar[dd]\\
      & \F_x = \varinjlim \F(U) \ar[rr, dashed]& & \G_x\\
      \F(V) \ar[ru, "\rho^V_x"] \ar[rr, "\phi_V"] & & \G(V) \ar[ru]
    \end{tikzcd}
  \]
From this, we list a few consequences of the colimit consturction in
this setting.
\begin{prop}\todo{Double check these are true.}
  \begin{enumerate}
  \item Given an \(s \in \F_x\), there exists some open neighborhood
    \(U\) of \(x\) and some \(t \in U\) such that \(\rho^U_x(t) = s\).
  \item Given a homomorphism of presheaves \(\phi \from \F \to \G\),
    we have \[
      \rho^U_x(\G) \circ \phi_U = \phi_x \circ \rho^U_x(\F)
    \]
    from the commutative diagram.
  \end{enumerate}
\end{prop}
\begin{lem}
  Let \(\F\) be a sheaf. Given open \(U \subset X\) and \(s,t \in
  \F(U)\), if \(\rho_x^U(s) = \rho_x^U(t)\) for all \(x \in U\), then
  \(s=t\). In other words, \[
    \F(U) \to \prod_{x \in U} F_x \text{ is injective.}
  \]
\end{lem}
\begin{proof}
  Let \(\rho_x^U(s) = \rho_x^U(t)\). Then, there exists an open neighborhood
  \(U_x\) of \(x\) such that \(\rho_{U_x}^U(s) =
  \rho_{U_x}^U(t)\). Now, \(U = \Union_{x \in U} U_x \implies s=t\) by
  (S1). 
\end{proof}
\begin{cor}
  Let \(\F\) be a presheaf, \(\G\) a sheaf, and \[
    \phi_1, \phi_2 \from \F \to \G
  \]
  If \(\phi_{1x} = \phi_{2x}\) for all \(x \in X\), then \(\phi_1 =
  \phi_2\). 
\end{cor}
\begin{proof}
  Consider that \[
    \rho^U_x(\G)(\phi_{1U}(s)) = \phi_{1x}(\rho_x^U(\F)(s)) =
    \phi_{2x}(\rho^U_x(\G)(s)) = \rho^U_x(\G)(\phi_{2U}(s))
  \]
  Then, by the lemma above, the corollary follows.
\end{proof}
\begin{defn}
  Given a sheaf \(\F\) and \(s \in \F(X)\), we define \[
    \Supp s := \{x \in X \st \rho^X_x(s) \neq 0\}
  \]
\end{defn}
\begin{prop}
  \(\Supp s\) is closed in \(X\).
\end{prop}
\begin{proof}
  Let \(x \in X \setminus \Supp s\). Then, \[
    \rho^X_x(s) = 0 \implies \exists \text{ open } V \ni x \text{ such that }
    \rho^X_V(s) = 0
  \]
  Thus, there is a \(y \in V\) such that \(\rho^X_y(s) = 0\), so \(V
  \subset X \setminus \Supp s\).
\end{proof}
\begin{prop}\label{inj-and-bij-lift-from-stalk}
  Let \(\phi \from \F \to \G\) be a morphism of presheaves.
  \begin{enumerate}
  \item Assume that \(\F\) is a sheaf. Then \[
      \phi_x \from \F_x \to \G_x \text{ are injective }\forall x \in X
      \iff \phi_U \from \F(U) \to \G(U) \text{ are injective }\forall
      U \subset X
    \]
  \item Assume both \(\F\) and \(\G\) are sheaves. Then, \[
      \phi_x \from \F_x \to \G_x \text{ are bijective }\iff \phi_U
      \text{ are bijective.}
    \]
  \end{enumerate}
\end{prop}
\begin{proof}
  \begin{enumerate}
  \item For \((\implies)\), let \(s,t \in \F(U)\) with \(\phi_U(s) =
    \phi_U(t)\). Then, \[
      \rho^U_x(\phi_U(s)) = \rho^U_x(\phi_U(t)) \iff
      \phi_x(\rho^U_x(s)) = \phi_x(\rho^U_x(t))
    \]
    (where \(\rho^U_x\) has domain for the appropriate
    (pre)sheaf). Then, since \(\phi_x\) is injective, we have that
    \(\rho^U_x(s) = \rho^U_x(t)\) and so \(s=t\) by our lemma.

    For \((\impliedby)\), let \(s_x,t_x \in F_x\) and \(\phi_x(s_x) =
    \phi_x(t_x)\). Then, there exists open set \(U \ni x\) and
    \(s_U,t_U \in F(U)\) such that \(s_x = \rho^U_x(s_u)\) and \(t_x =
    \rho^U_x(t_u)\). However, from the definition of the stalk of
    \(G\), there 
    exists an open set \(V\) such that \(x \in V \subset U\) with \[
      \rho^U_V(\phi_U(s_U)) = \rho^U_V(\phi_U(t_U)) \iff
      \phi_V(\rho^U_V(s_U)) = \phi_V(\rho^U_V(t_U))
    \]
    and so, by the injectivity of \(\phi_V\), \(\rho^U_V(s_U) =
    \rho^U_V(t_U)\). Thus, by our lemma, \(s_U = t_U\).
  \item For both parts, we need only show surjectivity. 

    For \((\impliedby)\), given \(s_x \in \G_x\), there exists a
    neighborhood \(U_x\) and an
    \(s \in \G(U_x)\) such that \(\rho^{U_x}_x(s) = s_x\). Since
    \(\phi_{U_x}\) is surjective, then there is a \(t \in \F(U_x)\)
    such that \(\phi_{U_x}(t) = s\). Thus, \[
      \phi_x(\rho^{U_x}_x(t)) = \rho^{U_x}_x(\phi_{U_x}(t)) =
      \rho^{U_x}_x(s) = s_x
    \]
    and so \(\phi_x\) is surjective. 

    For \((\implies)\), let \(t \in \G(U)\) and let \(x \in U\). Then, by
    the surjectivity of \(\phi_x\), there
    exists an \(s_x \in \F_x\) such that \[
      \rho^U_x(t) = \phi_x(s_x)
    \]
    Now, by definition of \(\phi_x\),  there is some \(s_{U_x} \in U_x
    \subset U\) such
    that \(\phi_{U_x}(s_{U_x}) = \phi_{U_x}(t)\). 
    \[
      \hspace{-0.5in}
      \begin{tikzcd}
        & \F(U) \ar[ld] \ar[dd, "\rho^U_x"]\ar[r, "\phi_U", hookrightarrow]&
        \G(U) \ar[dd, "\rho^U_x"] \ar[rd]\\
        \F(U_x) \ar[rd, "\rho^{U_x}_x"] & & & \G(U_x) \ar[ld] \\
        & \F_x \ar[r, "\phi_x", twoheadrightarrow, hook]& \G_x
      \end{tikzcd}
      \rightsquigarrow
      \begin{tikzcd}
        & &t \ar[dd,mapsto, "\rho^U_x"] \\
        s_{U_x} \ar[rd,mapsto, "\rho^{U_x}_x"]& & &
        \phi_{U_x}(s_{U_x}) \ar[ld, mapsto]\\
        & s_x \ar[r, mapsto, "\phi_x"]& \phi_x(s_x) = \rho^U_x(t)
      \end{tikzcd}
    \]
    Note that \(\phi_{U_x}(s_{U_x})\) gives the same element in
    \(\G_x\) as \(t\) under the appropriate restriction maps. So,
    there exists a \(V_x \subset U_x \subset U\) such that, for \(s_{V_x} =
    \rho^{U_x}_{V_x}(s_{U_x})\), \[
      \phi_{V_x}(s_{V_x}) = \rho^U_{V_x}(t)
    \]
    Now, in order to glue this into a section in \(\F(U)\), we need to
    check the 
    gluing condition. Namely, we want to show
    \(\rho^{V_{x_1}}_{V_{x_1} \intersect V_{x_2}}(s_{V_{x_1}}) =
    \rho^{V_{x_2}}_{V_{x_1} \intersect V_{x_2}}(s_{V_{x_2}})\) for any
    \(x_1, x_2 \in U\) (where \(U = \Union_{x \in U}
    V_x\)). Consider \[
      \rho^{V_{x_1}}_{V_{x_1} \intersect
        V_{x_2}}(\phi_{V_{x_1}}(s_{V_{x_1}}))  =
      \rho^{V_{x_1}}_{V_{x_1} \intersect V_{x_2}}(\rho^U_{V_{x_1}}(t))
      = \rho^{V_{x_2}}_{V_{x_1} \intersect
        V_{x_2}}(\rho^U_{V_{x_2}}(t)) = \rho^{V_{x_2}}_{V_{x_1} \intersect
        V_{x_2}}(\phi_{V_{x_2}}(s_{V_{x_2}}))
    \]
    However, we can then commute our homomorphism and restriction to
    get \[
      \hspace{-0.5in} \rho^{V_{x_1}}_{V_{x_1} \intersect
        V_{x_2}}(\phi_{V_{x_1}}(s_{V_{x_1}})) = \rho^{V_{x_2}}_{V_{x_1} \intersect
        V_{x_2}}(\phi_{V_{x_2}}(s_{V_{x_2}})) \implies \phi_{V_{x_1}
        \intersect V_{x_2}}(\rho^{V_{x_1}}_{V_{x_1} \intersect
        V_{x_2}}(s_{v_{x_1}})) = \phi_{V_{x_1}
        \intersect V_{x_2}}(\rho^{V_{x_2}}_{V_{x_1} \intersect
        V_{x_2}}(s_{v_{x_2}})) 
    \]
    However, by part (a), \(\phi_{V_{x_1} \intersect V_{x_2}}\) is
    injective. Thus, we get \[
      \rho^{V_{x_1}}_{V_{x_1} \intersect
        V_{x_2}}(s_{v_{x_1}}) = \rho^{V_{x_2}}_{V_{x_1} \intersect
        V_{x_2}}(s_{v_{x_2}})
    \]
    Then, since \(\F\) is a sheaf, there exists an \(s \in \F(U)\)
    such that \(\rho^U_{V_x}(s) = s_{V_x}\). In conclusion, we observe
    that \[
      \rho^U_{V_x}(t) = \phi_{V_x}(s_{V_x}) =
      \phi_{V_x}(\rho^U_{V_x}(s)) = \rho^U_{V_x}(\phi_U(s))
    \]
    and so, because \(G\) is a sheaf, \(\phi_U(s) = t\).
  \end{enumerate}
\end{proof}
\todo{Insert stuff about direct limits and exactness}
\begin{defn}
  Given \(\F,\G,\H\) all presheaves of abelian groups and \(\phi \from
  \F \to \G\) and \(\psi \from \G \to \H\) morphisms. Then, we say \[
    \F \to[\phi] \G \to[\psi] \H
  \]
  is \de{exact in the category of presheaves} if \[
    \F(U) \to[\phi_U] \G(U) \to[\psi_U] \H(U)
  \]
  is exact for every open set \(U \subset X\).
\end{defn}
\begin{cor}
  If \[
    \F \to[\phi] \G \to[\psi] \H
  \] is exact in \(\catname{PrSh}\),
  then, for every point \(x \in X\), \[
    \F_x \to[\phi_x] \G_x \to[\psi_x] \H_x
  \]
  is also exact. In particular, if \[
    0 \to \F \to[\phi] \G \to[\psi] \H \to 0
  \]
  is exact, then, for all \(x \in X\), \[
    0 \to \F_x \to[\phi_x] \G_x \to[\psi_x] \H_x \to 0
  \]
\end{cor}
\begin{defn}
  A sequence of sheaves \[
    \F \to[\phi] \G \to[\psi] \H
  \] is \de{exact in
  \(\catname{Sh}\)} if \[
    \F_x \to[\phi_x] \G_x \to[\psi_x] \H_x
  \]
  is exact for every \(x \in X\).
\end{defn}
\begin{thm}\label{section-functor-is-left-exact}
  Let \[
    0 \to \F \to \G \to \H
  \]
  be an exact sequence of sheaves. Then, for every open \(U \subset
  X\), \[
    0 \to \F(U) \to[\phi_U] \G(U) \to[\psi_U] \H(U)
  \]
  is exact.
\end{thm}
\begin{proof}
  The exactness at \(\F(U)\) follow from the fact that \[
    0 \to \F_x \to \G_x \to \H_x
  \]
  is exact by definition of the exactness of sheaves and the above
  proposition 
  \ref{inj-and-bij-lift-from-stalk}.

  For exactness of \(\G(U)\), first consider \(s \in \F(U)\). Then,
  for every \(x \in U\), we get \[
    \rho^U_x(\psi_U(\psi_U(s))) = \psi_x(\phi_x(\rho^U_x(s))) = 0
  \]
  because \(\phi_x \circ \phi_x = 0\) by the exactness
  assumption. Thus, \(\psi_U \circ \phi_U = 0\) and so \(\phi_U(\F(U))
  \subset \ker \psi_U\). To show the other inclusion, we require the
  following lemma. 
  \begin{lem}
    Let \(\K(U) = \ker \psi_U\). Then, \(\K\) is a sheaf and \(\K_x =
    \ker(\G_x \to[\psi_x] \H_x)\).
  \end{lem}
  \begin{proof}[Proof of Lemma]
    Take \(U = \Union_{\alpha \in I} U_\alpha\). Then, for \(s \in
    \K(U) \subset \G(U)\), if
    \(\rho^U_{U_\alpha}(s) = 0\) for all \(\alpha \in I\), then \(s 
    = 0\) because \(\G\) is a sheaf. Thus, \(\K(U)\) satisfies
    \ref{sheaf-1}.

    Now take \(s_\alpha \in \K(U_\alpha) \subset \G(U_\alpha)\) such
    that \(\rho^{U_\alpha}_{U_\alpha \intersect U_\beta}(s_\alpha) =
    \rho^{U_\beta}_{U_\alpha \intersect U_\beta}(s_\beta)\). Then,
    since \(\G\) is a sheaf, there exists \(s \in \G(U)\) such that
    \(\rho^U_{U_\alpha}(s) = s_\alpha\) for all \(\alpha\). From this,
    we get \[
      \rho^U_{U_\alpha}(\H)(\psi_U(s)) = \psi_{U_\alpha}(s_\alpha) = 0
      \implies \psi_U(s) = 0 \implies s \in \K(U)
    \]
    thus giving us that \(\K\) satisfies \ref{sheaf-2}.
  \end{proof}
  So now we wish to check if \(\phi_U(\F(U)) \subset \K(U)\). From the
  lemma, we get that \[
    \phi_x(\F_x) = \ker \psi_x = K_x \implies \phi_x \from \F_x \to
    \K_x \text{ is an isomorphism for all }x
  \]
  and so, by \ref{inj-and-bij-lift-from-stalk}, \(\phi\) is an
  isomorphism of the sheaves \(\F\) 
  and \(\K\). 
  \todo{Finish this proof.}
\end{proof}
A question to ask is \[
  \text{When does }0 \to \F \to \G \to \H \to 0 \text{ exact }\implies
  0 \to \F(U) \to \G(U) \to \H(U) \to 0 \text{ exact?}
\]
Given some surjection \(\G_x \onto \H_x\), some \(t \in \H(U)\), then
for every \(x \in U\), there is a neighborhood \(U_x \subset U\) and
\(s \in \G(U_x)\) such that \(\psi_{U_x}(s) = \rho^U_{U_x}(t)\). In
other words, we have some local lift. Can we glue all these local
lifts together? Sometimes not. 
\begin{defn}
  Let \(\F\) be a sheaf on \(X\). \(\G\) is called \de{flasque} (or
  \de{flabby}) if the restriction maps \(\rho^U_V \from \F(U) \to
  \F(V)\) are all surjective.
\end{defn}
In particular, for a flasque sheaf, \(\rho^X_V \from \F(X) \to \F(V)\)
is surjective.
\begin{examples}
  \begin{enumerate}
  \item The skyscraper sheaf is flasque.
  \item \todo{Check this} The sheaf of smooth functions on a connected
    differentiable manifold. 
  \end{enumerate}
\end{examples}
\begin{thm}
  Let \[
    0 \to \F \to[\phi] \G \to[\psi] \H \to 0
  \]
  be an exact sequence of sheaves. If \(\F\) is flasque, then \[
    0 \to \F(X) \to[\phi_X] \G(X) \to[\psi_X] \H(X) \to 0
  \]
  is exact. If, in addition, \(\G\) is flasque, then \(\H\) is flasque
\end{thm}
\begin{rmk}
  \(X\) can be replaced with any open set \(U \subset X\) and the
  result still holds.
\end{rmk}
\begin{proof}
  By the previous theorem (\ref{section-functor-is-left-exact}), we
  need only show \(\psi_U\) is 
  surjective. Let \(t \in \H(X)\). Then, for all \(x \in X\), there
  exists an open 
  neighborhood \(U\) with \(x
  \in U, s \in \G(U)\) such that \(\psi_U(s) = \rho^X_U(t)\) by the
  surjectivity of the stalks. Now, consider all pairs \((U,s)\) such
  that \(U \subset X\) is open and \(s\) is a lift over \(U\), ie \(s
  \in \F(U)\) and \(\psi_U(s) = \rho^X_U(t)\).

  Our first step is to construct a maximal pair with the partial
  order \[
    (U_1,s_1) \leq (U_2,s_w) \iff U_1 \subset U_2 \text{ and
    }s_2|_{U_1} = s_1
  \]
  Let \(\{(U_\alpha,s_\alpha)\}_\alpha\) be a totally ordered
  subset. We wish to find an upper bound. Take \(U := \Union
  U_\alpha\). Then, since we are in a totally ordered set, for
  \(U_\alpha \subset U_\beta\), we have \[
    s_\alpha = \rho^{U_\alpha}_{U_\alpha}(s_\alpha) =
    \rho^{U_\beta}_{U_\alpha}(s_\beta)
  \]
  and so, by \ref{sheaf-2}, there exists an \(s_U \in \G(U)\) such
  that \((U,s_U)\) is an upper bound. Thus, by Zorn's lemma, there is
  a maximal \((U^*,s_{U^*})\) for our set of pairs.

  Assume there exists an \(x \in X \setminus U^*\). Then, there is an
  open set \(V\) containing \(X\) and \(s_V \in \G(V)\) such that
  \(\psi_V(s_V) = \rho^X_V(t)\). So, take \[
    \psi_{U^* \intersect V}(s_{U^*}|_{U^* \intersect V} - s_{V}|_{U^*
      \intersect V}) = \rho^X_{U^* \intersect V}(t) - \rho^X_{U^*
      \intersect V}(t) = 0
  \]
  and thus \(s_{U^*}|_{U^* \intersect V} - s_{V}|_{U^* \intersect V}
  \in \ker \psi_{U^* \intersect V} = \phi_{U^* \intersect V}(\F(U^*
  \intersect V))\) by Theorem
  \ref{section-functor-is-left-exact}. However, since \(\F\) is
  flasque, we have that \[
    \F(V) \onto \F(U^* \intersect V)
  \]
  that is, the restriction map is surjective. Thus, \[
    s_{U^*}|_{U^* \intersect V} - s_V|_{U^* \intersect V} = \phi_{U^*
      \intersect V}(\rho^{U^*}_{U^* \intersect V}(z))
  \]
  for some \(z \in \F(V)\). Now, take \(s_V' = s_V+\phi_V(z)\). Then,
  \(s_{U^*}|_{U^* \intersect V} = s_V'|_{U^* \intersect V}\) by
  construction. Therefore, using \ref{sheaf-2}, there exists an
  element \(s_{U^* \union V} \in \G(U^* \union V)\) such that \(s_{U^*
    \union V}|_{U^*} = s_{U^*}\) and \(s_{U^* \union V}|_V =
  s_V'\). So, we have construced \(s_{U^* \union V}\) such that \[
    (U^*, s_{U^*}) \prec (U^* \union V,s_{U^* \union V})
  \]
  violating the maximality of \((U^*,s_{U^*})\). Thus, it must be that
  \(X \setminus U^* = \emptyset\).

  Our second step is to consider the commutative diagram with exact
  rows, \(V \subset U\), and \(\G\) flasque. \[
  \begin{tikzcd}
    0 \ar[r] & \F(U) \ar[d] \ar[r] & \G(U) \ar[d, two heads] \ar[r] & \H(U)
    \ar[d] \ar[r] & 0\\
    0 \ar[r] & \F(V) \ar[r] & \G(V) \ar[r] & \H(V) \ar[r] & 0
  \end{tikzcd}
\]
The surjectivity of \(\G(U) \to \G(V)\) follows from \(\G\) flasque,
and so \(\H(U) \to \H(V)\) must be surjective by a straightforward
diagram chase. 
\end{proof}
Now, given an exact sequence of sheaves, \[
  0 \to \F \to \G \to \H \to 0
\]
the sequence of global sections may not be exact. We provide an
explicit example to illustrate what can go wrong.
\begin{example}
  Take \(X = \C \setminus\{(0,0)\} \subset \C\) and consider \(\O\)
  the sheaf of holomorphic functions. In otherwords, for \(U \subset
  X, \O(U)\) is the \(\C\)-algebra of holomorphic functions on
  \(U\). Next, consider the induced derivative map
  \begin{align*}
    \O & \to \O \\
    f & \mapsto f'
  \end{align*}
  which has kernel given by the locally constant functions on \(X\),
  say \(C_X\). Then, we have exact sequence of sheaves \[
    0 \to C_X \to \O \to[\psi] \O \to 0
  \]
  However, every holomorphic function has a local antiderivative. In
  other words, given \(f \in \O(U)\), for all \(x \in U\), there
  exists a \(U_x \subset U\) with \(x \in U_x\) and \(g_x \in
  \O(U_x)\) such that \(g_x' = \psi(g_x) = f|_{U_x}\). However,
  \(\psi_X(\O(X))\) consists of holomorphic functions with a global
  antiderivative, which is not all of \(\O(X)\). Thus, \(\psi_X\) is
  not surjective and so we only have exactness up to \[
    0 \to C_x \to \O(X) \to[\psi_X] \O(X)
  \]
  To capture the failure of the exactness, we introduce the long exact
  sequence of cohomology
  groups (using the necessary homological algebra) \[
    \O(X) \to[\psi_X] \O(X) \to H^1(X,C_X) \to H^1(X,\O) \to \cdots
  \]
  However, because \(X\) is a
  Riemann surface but not compact, \(H^1(X,\O) = 0\) and thus \[
    H^1(X,C_X) \isom \O(X) / \psi_X(\O(X)) \isom \C
  \]
  because \(\psi_X(\O(X))\) is the \(\C\)-algebra of all functions
  that integrate to zero on the unit circle. Note that this gives the
  same result as the singular cohomology of \(X\).
\end{example}
\begin{prop}
  \(\phi \from \F \to \G\) is an epimorphism in the category of
  presheaves if and only if \(\phi_U \from \F(U) \to \G(U)\) is
  surjective for every \(U \subset X\).
\end{prop}
\begin{proof}
  Let \(C := \coker \phi\) be the presheaf cokernel of \(\phi\). Then,
  \(\phi\) is an epimorphism if and only if \(C\) is the zero
  sheaf. Thus, \[
\hspace{-0.5in}    \phi \text{ is an epimorphism } \iff C = 0 \iff
     C(U) := \coker \phi_U = 0, \forall U 
    \subset X \iff \phi_U \text{ is surjective }\forall U \subset X
  \]
\end{proof}
In the category of sheaves, however, the cokernel presheaf is not
necessarily a sheaf, so we have to do a little more work.
\begin{prop}
  Let \(\phi \from \F \to \G\) be a morphism of sheaves of abelian
  groups. Then, \(\phi\) is an epimorphism in the category of sheaves of
    abelian groups if and only if \(\phi_x \from \F_x \to \G_x\) is surjective for all \(x \in X\)
  \end{prop}
  \begin{proof}
    
  \end{proof}
\begin{bibdiv}
  \begin{biblist}
  \end{biblist}
\end{bibdiv}
\end{document}